<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>another test</title>
    <url>/2022/03/03/another-test/</url>
    <content><![CDATA[<p>This is another test to insert a picture.</p>
<img src="/2022/03/03/another-test/01.PNG" class>

]]></content>
      <tags>
        <tag>test</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2022/03/04/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>. And I changed a little on my Mac for a little test.</p>
]]></content>
  </entry>
  <entry>
    <title>多事件驱动的利率择时模型</title>
    <url>/2022/03/03/%E5%A4%9A%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%88%A9%E7%8E%87%E6%8B%A9%E6%97%B6%E6%A8%A1%E5%9E%8B/</url>
    <content><![CDATA[<h3 id="尝试搭建利率择时模型的初衷"><a href="#尝试搭建利率择时模型的初衷" class="headerlink" title="尝试搭建利率择时模型的初衷"></a>尝试搭建利率择时模型的初衷</h3><p>​    在我浅显的认知中，利率择时可以说是宏观经济永恒的主题，也是最难的领域。因为利率择时不仅需要对宏观经济的精准把握，还需要对国家政策、流动性深入的研究。就拿债券基金来说，在之前中国债券不暴雷的年代，十个债基里有八九个都是做信用下沉的，有些基金经理直接将利率债当做组合的压舱石，买入了就一直持有到期，用来平抑组合的波动。以前这种管理模式可行，是因为信用债和非标资产可以给予组合足够的回报。随着信用债开始逐步暴雷，资管新规开始严格限制非标资产的比例，这些基金经理原先的套路行不通了，开始试图通过其他方式增厚收益。所有打新等固收+产品开始陆续受到追捧。可打新又能帮他们多久呢？个人认为未来一定会有越来越多的投资者开始增加对利率债的投资，利率择时也会被研究的更加透彻。</p>
<p>​    目前市面上多数的券商研报对于利率择时主要通过宏观指标入手将经济划分成复苏、过热、滞涨、衰退，类似于美林时钟，以此对未来利率走势进行预测判断。这种方法的缺陷在于无法很精准的确定目前经济所在的周期，且四个周期的持续时间有时也会显著不同，甚至有时会跨过某个周期直接进入下一个周期。正好本人宏观经济匮乏，所以只能从金工技术分析的角度尝试搭建一个利率择时模型。这个模型没有覆盖宏观指标与政策事件，因此仅可算作是一个起点模型，后续需要更加精细的打磨与调整。</p>
<h3 id="模型概况与表现"><a href="#模型概况与表现" class="headerlink" title="模型概况与表现"></a>模型概况与表现</h3><p><strong>多事件驱动的国债期货择时模型最终由三个子事件组成，分别为：</strong></p>
<p><strong>子事件</strong>1：FR007 1年期利率互换价格连续10个交易日下降，子事件信号触发后，做多十年国债期货15个交易日；</p>
<p><strong>子事件</strong>2：O&#x2F;N Shibor 1年期利率互换价格处于近1个月高位（均值加两倍标准差），子事件信号触发后，做多十年国债期货10个交易日；</p>
<p><strong>子事件</strong>3：7日定盘回购利率（FR007）处于近1个季度高位（均值加两倍标准差），子事件信号触发后，做空十年国债期货10个交易日。</p>
<p>当多空信号同时触发，或做多 &#x2F; 做空期间再次触发相反方向的事件信号，以做空信号为准。</p>
<p>整体表现如下：</p>
<table>
<thead>
<tr>
<th align="center">时间区间</th>
<th align="center">区间净值</th>
<th align="center">年化收益</th>
<th align="center">最大回撤</th>
<th align="center">资金利用率</th>
</tr>
</thead>
<tbody><tr>
<td align="center">2015.03 – 2021.12</td>
<td align="center">1.312</td>
<td align="center">5.42%</td>
<td align="center">6.34%</td>
<td align="center">84.34%</td>
</tr>
</tbody></table>
<p>注1：测算时间自2015年3月20日国债期货出现以来开始，年化收益率使用6.75年近似计算。</p>
<p>注2：资金利用效率 &#x3D; 所有实际做多与做空天数 &#x2F; 区间总天数。</p>
<p><strong>模拟净值如下：</strong></p>
<img src="/2022/03/03/%E5%A4%9A%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%88%A9%E7%8E%87%E6%8B%A9%E6%97%B6%E6%A8%A1%E5%9E%8B/%E6%A8%A1%E6%8B%9F%E5%87%80%E5%80%BC.png" class title="模拟净值">

<h3 id="变量筛选"><a href="#变量筛选" class="headerlink" title="变量筛选"></a>变量筛选</h3><h4 id="模型备选变量选择整体分类与结构"><a href="#模型备选变量选择整体分类与结构" class="headerlink" title="模型备选变量选择整体分类与结构"></a>模型备选变量选择整体分类与结构</h4><p>​    在筛选模型备选变量时，我们希望备选指标能拥有以下特点：</p>
<ol>
<li><p><strong>尽可能高频</strong>，方便后期对利率走势进行实时的预测与把控。</p>
</li>
<li><p><strong>对国债利率的未来走势有一定领先性与预测能力</strong>。</p>
</li>
</ol>
<p>满足以上两个条件的变量主要以利率衍生品为主。目前我国的利率衍生品主要有国债期货与利率互换两大类。除此以外我们还尝试将其他常用利率加入模型，如7天回购定盘利率（FR007）、Shibor隔夜、Shibor 3个月等。</p>
<p>具体来说备选变量主要可以分为四个类型，分别为：</p>
<ol>
<li><p><strong>利率互换的价格：</strong>利率互换价格作为市场对参考利率的预期，对参考利率的未来走势有一定的预测作用。</p>
</li>
<li><p><strong>利率互换衍生指标：</strong>利率互换的溢价与不同期限合约的价差一定程度上也可以体现市场对未来利率曲线变化的预期。</p>
</li>
<li><p><strong>国债期货价格：</strong>国债期货的价格更直接与市场对未来国债收益率的预期挂钩，因此国债期货的价格也是重要的备选变量。</p>
</li>
<li><p><strong>其他常用利率：</strong>FR007、O&#x2F;N Shibor、Shibor 1Y等。</p>
</li>
</ol>
<img src="/2022/03/03/%E5%A4%9A%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%88%A9%E7%8E%87%E6%8B%A9%E6%97%B6%E6%A8%A1%E5%9E%8B/%E5%8F%98%E9%87%8F%E7%BB%93%E6%9E%84.png" class title="变量结构">



<h3 id="单事件效果"><a href="#单事件效果" class="headerlink" title="单事件效果"></a>单事件效果</h3><p>具体的如何测算这里就不写了，有兴趣回头可以看报告。这里列举一些效果较好的单事件。</p>
<p><strong>单事件1：FR007 1Y利率互换价格连续10个交易日下降，事件信号触发后，做多十年国债期货15交易日。</strong></p>
<p>事件逻辑：该事件本质为利率变化的动量效应。当FR007 1年期利率互换的价格（平滑后）连续10个交易日下跌，表明价格下跌的趋势已经形成，故做多利率实现正收益。</p>
<img src="/2022/03/03/%E5%A4%9A%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%88%A9%E7%8E%87%E6%8B%A9%E6%97%B6%E6%A8%A1%E5%9E%8B/image-20220303161832455.png" class title="image-20220303161832455">



<img src="/2022/03/03/%E5%A4%9A%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%88%A9%E7%8E%87%E6%8B%A9%E6%97%B6%E6%A8%A1%E5%9E%8B/image-20220303162046974.png" class title="image-20220303162046974">

<p><strong>单事件2：10年国债期货主力连续价格连续5个交易日上涨，事件信号触发后，做多十年国债期货15个交易日。</strong></p>
<p>事件逻辑：同事件1类似，该事件本质为利率的动量效应。当10年期国债期货价格（主力连续）连续5个交易日上涨，表明利率下降的短期趋势已经形成，故做多国债期货实现正收益。</p>
<img src="/2022/03/03/%E5%A4%9A%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%88%A9%E7%8E%87%E6%8B%A9%E6%97%B6%E6%A8%A1%E5%9E%8B/image-20220303162144495.png" class title="image-20220303162144495">

<img src="/2022/03/03/%E5%A4%9A%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%88%A9%E7%8E%87%E6%8B%A9%E6%97%B6%E6%A8%A1%E5%9E%8B/image-20220303162151068.png" class title="image-20220303162151068">

<p><strong>单事件3：FR007 6M利率互换价差连续10个交易日升高，做空国债期货10个交易日。</strong></p>
<p>事件逻辑：互换价差长期保持稳定，因此当互换价差持续提升时，未来较大概率会 恢复至稳定区间。套利者的存在会一定程度上推高利率，故做空国债期货10个交易日。</p>
<img src="/2022/03/03/%E5%A4%9A%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%88%A9%E7%8E%87%E6%8B%A9%E6%97%B6%E6%A8%A1%E5%9E%8B/image-20220303162216744.png" class title="image-20220303162216744">

<img src="/2022/03/03/%E5%A4%9A%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%88%A9%E7%8E%87%E6%8B%A9%E6%97%B6%E6%A8%A1%E5%9E%8B/image-20220303162221698.png" class title="image-20220303162221698">

<p><strong>单事件4：O&#x2F;N Shibor 1年期利率互换价格处于近1个月高位。事件信号触发后，做多十年国债期货10个交易日。</strong></p>
<p>事件逻辑：该事件本质为利率出现短期极值的均值回复过程。当隔1年期隔夜Shibor利率互换价格处于短期1个月的高位时（高于近1个月的均值加两倍标准差），市场看空利率（预计利率未来会升高）的情绪短期内达到峰值，此时往往会在未来短期内出现均值回复的过程。故应在此时短期看多做多10年国债期货。</p>
<img src="/2022/03/03/%E5%A4%9A%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%88%A9%E7%8E%87%E6%8B%A9%E6%97%B6%E6%A8%A1%E5%9E%8B/image-20220303162259892.png" class title="image-20220303162259892">

<img src="/2022/03/03/%E5%A4%9A%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%88%A9%E7%8E%87%E6%8B%A9%E6%97%B6%E6%A8%A1%E5%9E%8B/image-20220303162303641.png" class title="image-20220303162303641">

<p><strong>单事件5：7天回购定盘利率（FR007）近1个季度处于高位。事件信号触发后，做空十年国债期货10个交易日。</strong></p>
<p>事件逻辑：该事件属于突破长期状态而形成新常态与趋势的情况。当7天回购定盘利率对长期（1个季度）所处的区间出现了突破，则一定程度说明利率新的长期趋势形成，此时应顺势而为，看空利率，做空国债期货。</p>
<h3 id="多事件整合"><a href="#多事件整合" class="headerlink" title="多事件整合"></a>多事件整合</h3><p><strong>1）多个同方向信号（同为做多或同为做空）同时触发：对单个信号的做多&#x2F;做空区间取并集。若多个同向信号同时触发，或在做多&#x2F;做空过程中再次触发同向信号，自动延长做多&#x2F;做空时间至最新的信号对应做多&#x2F;做空结束时点。</strong></p>
<img src="/2022/03/03/%E5%A4%9A%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%88%A9%E7%8E%87%E6%8B%A9%E6%97%B6%E6%A8%A1%E5%9E%8B/image-20220303162414904.png" class title="image-20220303162414904">

<p><strong>2）多个反向信号同时触发（或单事件做多与做空区间出现部分重合）：根据平均回报率决定重合区间做多与做空方向。分别计算全时段所有做多信号日度平均回报率与全时段所有做空信号日度平均回报率。根据结果，选取回报率高的方向对重复区间进行操作。</strong></p>
<img src="/2022/03/03/%E5%A4%9A%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%9A%84%E5%88%A9%E7%8E%87%E6%8B%A9%E6%97%B6%E6%A8%A1%E5%9E%8B/image-20220303162434078.png" class title="image-20220303162434078">

<h3 id="最终模型结果的讨论"><a href="#最终模型结果的讨论" class="headerlink" title="最终模型结果的讨论"></a>最终模型结果的讨论</h3><p><strong>子事件</strong>1：FR007 1年期利率互换价格连续10个交易日下降，子事件信号触发后，做多十年国债期货15个交易日；</p>
<p><strong>子事件</strong>2：O&#x2F;N Shibor 1年期利率互换价格处于近1个月高位（均值加两倍标准差），子事件信号触发后，做多十年国债期货10个交易日；</p>
<p><strong>子事件</strong>3：7日定盘回购利率（FR007）处于近1个季度高位（均值加两倍标准差），子事件信号触发后，做空十年国债期货10个交易日。</p>
<p><strong>事件触发侧重点不同：趋势限定条件与极值限定条件。</strong>事件1与事件4相比较，事件1的触发并不受标准差限制，仅注重趋势（10个交易日连续下降）的形成;事件4的触发需超过均值加两倍标准差，所以事件4触发时价格已经处于短期极高的临界位置，大概率均值回复。因此当事件1触发时投资逻辑为趋势投资，当事件4触发时投资逻辑为均值回复。</p>
<p><strong>事件期限结构不同：短期极值均值回复、中长期极值顺势而为。</strong>事件4与事件5的期限结构存在差异，事件4属于短期（1个月）价格处于历史高位，事件5属于中长期（1个季度）价格处于历史高位。由于短期定价更易受到投资者情绪等因素的主导，故短期的极值较大概率出现均值回复的情况。当价格突破了长期以来的波动区间，则说明定价逻辑可能出现改变，新的趋势已经形成。故本模型对期限结构不同的极值事件采取不同的操作增厚收益。</p>
]]></content>
      <categories>
        <category>金工</category>
        <category>利率择时</category>
      </categories>
      <tags>
        <tag>宏观利率</tag>
        <tag>利率择时</tag>
        <tag>技术分析</tag>
        <tag>事件驱动模型</tag>
      </tags>
  </entry>
  <entry>
    <title>博客上传图片使用hexo-image-link的问题</title>
    <url>/2022/03/04/%E5%8D%9A%E5%AE%A2%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E4%BD%BF%E7%94%A8hexo-image-link%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>​    使用typora便携markdown插入图片后，图片在typora可正常显示，但在网页中路径存在问题。经过查找网上关于解决此问题的方法，原因主要是markdown中图片的路径格式与asset image中不同，基本所有的帖子都建议使用hexo-image-link插件处理。该插件可以将markdown图片路径自动更改为asset-image格式，但实际操作中图片路径依旧出现了问题。</p>
<p>​    在下载hexo-asset-image包时系统已经在提示存在尚未修复的bug。怀疑可能是bug导致的无法成功转换路径。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure>



<p>解决方法：将hexo-asset-image插件中的index.js文件修改为以下代码再进行部署（记得修改_config.yml文件中的post_asset_folder为True）。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getPosition</span>(<span class="params">str, m, i</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> str.<span class="title function_">split</span>(m, i).<span class="title function_">join</span>(m).<span class="property">length</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> version = <span class="title class_">String</span>(hexo.<span class="property">version</span>).<span class="title function_">split</span>(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;after_post_render&#x27;</span>, <span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> config = hexo.<span class="property">config</span>;</span><br><span class="line">  <span class="keyword">if</span>(config.<span class="property">post_asset_folder</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> link = data.<span class="property">permalink</span>;</span><br><span class="line">    <span class="keyword">if</span>(version.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; <span class="title class_">Number</span>(version[<span class="number">0</span>]) == <span class="number">3</span>)</span><br><span class="line">       <span class="keyword">var</span> beginPos = <span class="title function_">getPosition</span>(link, <span class="string">&#x27;/&#x27;</span>, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">       <span class="keyword">var</span> beginPos = <span class="title function_">getPosition</span>(link, <span class="string">&#x27;/&#x27;</span>, <span class="number">3</span>) + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.</span></span><br><span class="line">    <span class="keyword">var</span> endPos = link.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;/&#x27;</span>) + <span class="number">1</span>;</span><br><span class="line">    link = link.<span class="title function_">substring</span>(beginPos, endPos);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> toprocess = [<span class="string">&#x27;excerpt&#x27;</span>, <span class="string">&#x27;more&#x27;</span>, <span class="string">&#x27;content&#x27;</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; toprocess.<span class="property">length</span>; i++)&#123;</span><br><span class="line">      <span class="keyword">var</span> key = toprocess[i];</span><br><span class="line"> </span><br><span class="line">      <span class="keyword">var</span> $ = cheerio.<span class="title function_">load</span>(data[key], &#123;</span><br><span class="line">        <span class="attr">ignoreWhitespace</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">xmlMode</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">lowerCaseTags</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">decodeEntities</span>: <span class="literal">false</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      $(<span class="string">&#x27;img&#x27;</span>).<span class="title function_">each</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> ($(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&#x27;src&#x27;</span>))&#123;</span><br><span class="line">            <span class="comment">// For windows style path, we replace &#x27;\&#x27; to &#x27;/&#x27;.</span></span><br><span class="line">            <span class="keyword">var</span> src = $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&#x27;src&#x27;</span>).<span class="title function_">replace</span>(<span class="string">&#x27;\\&#x27;</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span>(!<span class="regexp">/http[s]*.*|\/\/.*/</span>.<span class="title function_">test</span>(src) &amp;&amp;</span><br><span class="line">               !<span class="regexp">/^\s*\//</span>.<span class="title function_">test</span>(src)) &#123;</span><br><span class="line">              <span class="comment">// For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed.</span></span><br><span class="line">              <span class="comment">// In addition, to support multi-level local directory.</span></span><br><span class="line">              <span class="keyword">var</span> linkArray = link.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>).<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">elem</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> elem != <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">              &#125;);</span><br><span class="line">              <span class="keyword">var</span> srcArray = src.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>).<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">elem</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> elem != <span class="string">&#x27;&#x27;</span> &amp;&amp; elem != <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">              &#125;);</span><br><span class="line">              <span class="keyword">if</span>(srcArray.<span class="property">length</span> &gt; <span class="number">1</span>)</span><br><span class="line">                srcArray.<span class="title function_">shift</span>();</span><br><span class="line">              src = srcArray.<span class="title function_">join</span>(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">              $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&#x27;src&#x27;</span>, config.<span class="property">root</span> + link + src);</span><br><span class="line">              <span class="variable language_">console</span>.<span class="property">info</span>&amp;&amp;<span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;update link as:--&gt;&quot;</span>+config.<span class="property">root</span> + link + src);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="property">info</span>&amp;&amp;<span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;no src attr, skipped...&quot;</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="property">info</span>&amp;&amp;<span class="variable language_">console</span>.<span class="title function_">info</span>($(<span class="variable language_">this</span>));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      data[key] = $.<span class="title function_">html</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>博客搭建</category>
      </categories>
      <tags>
        <tag>hexo博客上传图片</tag>
      </tags>
  </entry>
</search>
